(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{405:function(e,n,t){"use strict";var a=t(61);n.a=function(e,n){for(var t={},r=function(r){t[n[r]]=Object(a.c)((function(t){return t[e][n[r]]}))},c=0;c<n.length;c++)r(c);return t}},454:function(e,n,t){"use strict";var a=t(2),r=t.n(a);t(523),n.a=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"donut multi"}))}},521:function(e,n,t){e.exports={header:"jfwYw-xaWQ4MoitkLsW4W",headerMain:"_346EdTDu-acSPmm0_nYaiO",headerImage:"_2rp8JRzcYxEztVTlJpBAO"}},522:function(e,n,t){},523:function(e,n,t){},555:function(e,n,t){e.exports={UserHeaderImage:"_3PwipiZnGQyJSs_EQDKsmk"}},556:function(e,n,t){"use strict";t.r(n),n.default=t.p+"logo_drop-d2a95b77.png"},557:function(e,n,t){e.exports={chats:"_1mlV_bsQI1azkJ6GzodNrL"}},558:function(e,n,t){e.exports={StyleChatsContainer:"lONun1z6SLWc8z6Z_kkbo"}},559:function(e,n,t){e.exports={Item:"_2X79oFiN3mIG9oy7yphsIZ",ItemHeader:"qohR1h_pyJMJDZCS77iMN",ItemHeaderUser:"_10aGXECFdblm3O01WfHYsT",ItemContent:"_1CYdcziV0h7A0hOqMetCqh",ItemContentRecord:"_3IRHHCbRattsP2vw5hOoUF",ItemContentRecordImage:"jLh1MbNXbxAWssiz2mnAB",ItemContentRecordGroup:"_3hZ9FZMkYWpYOb6TAMr6P2",ItemContentRecordReverd:"_3QBM3S7u6ksEsTsYxK1EYt",ItemSendMessage:"_1sgzqb39sP6KxcrkWRHlh8"}},561:function(e,n,t){e.exports={ItemContent:"_1MLnLRJuUOyZQjzpktYlLd",ItemContentRecord:"_1fLTPemxJw8DO__O_lR2U8",ItemContentRecordImage:"UoIJmej2II6pEQctwDk1S",ItemContentRecordGroup:"_3IiGhLvNw8MZga9ZrsTjef",ItemContentRecordReverd:"_3kmXsqG_mGtmgoC9XchuG4"}},564:function(e,n,t){"use strict";t.r(n),n.default=t.p+"test-0c481e87.mp3"},723:function(e,n,t){"use strict";t.r(n);var a=t(434),r=t.n(a),c=t(2),i=t.n(c),s=t(14),l=t(521),o=t.n(l),u=t(725),d=(t(522),t(405)),m=t(454),f=(u.a.Search,function(e){var n=Object(d.a)("HeaderReducer",["loadingSearch","search"]),t=n.loadingSearch,a=n.search,r=Object(c.useCallback)((function(n){e.actionSearch(n.target.value)}),[]);return i.a.createElement("div",{className:"d-flex justify-content-end"},i.a.createElement("div",{className:"search-wrapper"},i.a.createElement(u.a,{className:"search",placeholder:"Search",onChange:r,value:a}),t?i.a.createElement(m.a,null):i.a.createElement("i",{className:"fa fa-search","aria-hidden":"true"})))}),g=i.a.memo(f),b=t(61),h=t(60),p=t(74),O=t.n(p),E=t(555),S=t.n(E),v=t(49),j=S.a.UserHeader,_=S.a.UserHeaderImage,y=i.a.lazy((function(){return t.e(14).then(t.bind(null,718))})),C=function(e){var n=Object(d.a)("LoginReducer",["dataUser"]).dataUser,t=Object(c.useState)(!1),a=O()(t,2),r=a[0],s=a[1],l=Object(b.b)(),o=Object(c.useCallback)((function(){s(!1)}),[n]),u=Object(c.useCallback)((function(){s(!1),l(Object(v.c)())}),[n]);return i.a.createElement("div",{className:"".concat(j," position-relative")},i.a.createElement("img",{src:n.image,alt:n.name,className:"".concat(_),onClick:function(){return s(!r)}}),r&&i.a.createElement(c.Suspense,{fallback:i.a.createElement("div",null)},i.a.createElement(y,{dataUser:n,actionClick:o,logOut:u})))},I=o.a.header,w=o.a.headerMain,k=o.a.headerImage,M=i.a.lazy((function(){return t.e(15).then(t.bind(null,717))})),N=t(556).default,R=Object(s.g)((function(e){var n=e.history,t=Object(d.a)("HeaderReducer",["search"]).search,a=Object(b.b)(),r=Object(c.useCallback)((function(e){a(Object(h.c)(e))}),[]),s=Object(c.useCallback)((function(){a(Object(h.b)())}),[]),l=Object(c.useCallback)((function(){a(Object(h.b)())}),[]);return i.a.createElement("div",{className:"".concat(I," d-flex align-items-center")},i.a.createElement("div",{className:"".concat(w," text-right d-flex align-items-center justify-content-between")},i.a.createElement("div",{className:"".concat(k),onClick:function(){return n.push("/")}},i.a.createElement("img",{src:N,alt:"Tiny"})),i.a.createElement("div",{className:"position-relative"},i.a.createElement(g,{actionSearch:r,actionNoSearch:s}),""!==t&&i.a.createElement(c.Suspense,{fallback:i.a.createElement("div",null)},i.a.createElement(M,{actionClick:l}))),i.a.createElement(C,null)))})),x=t(131),U=t.n(x),H=t(132),J=U()({loader:function(){return Promise.all([t.e(0),t.e(8)]).then(t.bind(null,729))},loading:H.a}),P=U()({loader:function(){return t.e(18).then(t.bind(null,733))},loading:H.a}),G=U()({loader:function(){return Promise.all([t.e(0),t.e(9)]).then(t.bind(null,727))},loading:H.a}),q=U()({loader:function(){return Promise.all([t.e(0),t.e(17)]).then(t.bind(null,731))},loading:H.a}),z=[{path:"/",exact:!0,main:function(e){return e.match,e.location,e.history,i.a.createElement(J,null)}},{path:"/todolist",exact:!0,main:function(e){return e.match,e.location,e.history,i.a.createElement(P,null)}},{path:"/user/:id",exact:!0,main:function(e){return e.match,e.location,e.history,i.a.createElement(G,null)}},{path:"/market",exact:!0,main:function(e){return e.match,e.location,e.history,i.a.createElement(q,null)}},{path:"",exact:!0,main:function(){return i.a.createElement("div",null,"404")}}],D=t(133),T=t(557),L=t.n(T),Y=t(92),$=t.n(Y),A=t(558),Z=t.n(A),Q=t(559),W=t.n(Q),F=t(34),X=t(57),K=t.n(X),V=t(18),B=t.n(V),ee=t(19),ne=t.n(ee),te=t(560),ae=t.n(te),re=t(561),ce=t.n(re),ie=t(728),se=t(72);function le(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function oe(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?le(Object(t),!0).forEach((function(n){ne()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):le(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function ue(){var e=$()(["\n  subscription OnCommentAdded {\n    newMessage {\n      content\n      _id\n      like\n      isSend\n      date\n      userSend {\n        name\n        image\n        _id\n      }\n      userReceive {\n        name\n        image\n        _id\n      }\n    }\n  }\n"]);return ue=function(){return e},e}function de(){var e=$()(["\n  query GetMessages($id: String!, $idUser: String!) {\n    messages(id: $id, idUser: $idUser) {\n      content\n      _id\n      like\n      isSend\n      date\n      userSend {\n        name\n        image\n        _id\n      }\n      userReceive {\n        name\n        image\n        _id\n      }\n    }\n  }\n"]);return de=function(){return e},e}var me=t(498),fe=ce.a.ItemContent,ge=ce.a.ItemContentRecord,be=(ce.a.ItemContentRecordGroup,ce.a.ItemContentRecordReverd),he=ce.a.ItemContentRecordImage,pe=localStorage.getItem("jwtToken"),Oe=JSON.parse(JSON.stringify(K.a.decode(pe))).id,Ee=Object(F.gql)(de()),Se=Object(F.gql)(ue()),ve=function(e){var n=Object(c.useState)([]),t=O()(n,2),a=t[0],r=t[1],s=Object(c.useRef)(null),l=Object(F.useQuery)(Ee,{variables:{id:Oe,idUser:e.id}}),o=ae()({},l),u=Object(F.useSubscription)(Se).data;return Object(c.useEffect)((function(){if(o.data){var e=o.data.messages.map((function(e){return oe(oe({},e),{},{date:me(new Date(parseInt(e.date)),"dd/mm/yyyy HH:MM")})}));r(e)}}),[o.data]),Object(c.useEffect)((function(){u&&(u.newMessage.userReceive._id==e.id||u.newMessage.userReceive._id==Oe&&u.newMessage.userSend._id==e.id)&&r((function(e){return[].concat(B()(e),[oe(oe({},u.newMessage),{},{date:me(new Date(parseInt(u.newMessage.date)),"dd/mm/yyyy HH:MM")})])}))}),[u]),Object(c.useEffect)((function(){s.current.scrollIntoView({block:"end"})}),[a]),i.a.createElement("div",{className:"".concat(fe)},a.length>0&&a.map((function(e,n){return i.a.createElement("div",{className:"".concat(ge," ").concat(e.isSend==Oe&&be),key:n},i.a.createElement("div",{className:"".concat(he)},a[n+1]?e.userSend._id!==a[n+1].userSend._id&&i.a.createElement(ie.a,{placement:e.isSend==Oe?"right":"left",title:e.userSend.name},i.a.createElement(se.b,{to:"/user/".concat(e.userSend._id)},i.a.createElement("img",{src:e.userSend.image,alt:e.userSend.name}))):i.a.createElement(ie.a,{placement:e.isSend==Oe?"right":"left",title:e.userSend.name},i.a.createElement(se.b,{to:"/user/".concat(e.userSend._id)},i.a.createElement("img",{src:e.userSend.image,alt:e.userSend.name})))),i.a.createElement(ie.a,{placement:e.isSend==Oe?"right":"left",title:e.date},i.a.createElement("span",null,e.content)))})),i.a.createElement("div",{ref:s}))};function je(){var e=$()(["\n  mutation CreateMessages($text: String!, $id: String!, $idUser: String!) {\n    createMessage(text: $text, id: $id, idUser: $idUser) {\n      content\n      _id\n      like\n      isSend\n      date\n      userSend {\n        name\n        image\n        _id\n      }\n      userReceive {\n        name\n        image\n        _id\n      }\n    }\n  }\n"]);return je=function(){return e},e}var _e=localStorage.getItem("jwtToken"),ye=JSON.parse(JSON.stringify(K.a.decode(_e))).id,Ce=W.a.Item,Ie=W.a.ItemHeader,we=W.a.ItemHeaderUser,ke=W.a.ItemSendMessage,Me=Object(F.gql)(je()),Ne=i.a.memo((function(e){var n=Object(c.useRef)(null),t=Object(F.useMutation)(Me),a=O()(t,1)[0],r=e.itemChat;return i.a.createElement("div",{className:"".concat(Ce)},i.a.createElement("div",{className:"".concat(Ie)},i.a.createElement("div",{className:"".concat(we)},i.a.createElement("img",{src:r.image,alt:r.name}),i.a.createElement("h6",null,r.name)),i.a.createElement("i",{className:"fa fa-times","aria-hidden":"true",onClick:function(){return e.closeUserChat(r)}})),i.a.createElement(ve,{id:r._id}),i.a.createElement("div",{className:"".concat(ke)},i.a.createElement("input",{type:"text",placeholder:"Aa",onKeyDown:function(e){return"Enter"===e.key&&function(e){a({variables:{text:e.target.value,id:ye,idUser:r._id}}).then((function(e){n.current.value=""}))}(e)},ref:n})))})),Re=t(85);function xe(){var e=$()(["\n  subscription OnCommentAdded {\n    newMessage {\n      content\n      _id\n      like\n      isSend\n      date\n      userSend {\n        name\n        image\n        _id\n      }\n      userReceive {\n        name\n        image\n        _id\n      }\n    }\n  }\n"]);return xe=function(){return e},e}function Ue(){var e=$()(['\n  query GetMessages {\n    messages(id: "5f587737dc35c91363b5de4b", idUser: "5f56f98a6c5d218580baf6bf") {\n      content\n    }\n  }\n']);return Ue=function(){return e},e}var He=Z.a.StyleChatsContainer,Je=localStorage.getItem("jwtToken"),Pe=JSON.parse(JSON.stringify(K.a.decode(Je))).id,Ge=new Audio(t(564).default),qe=(Object(F.gql)(Ue()),Object(F.gql)(xe())),ze=function(e){var n=Object(b.b)(),t=Object(d.a)("ChatsRuducer",["listChat"]).listChat,a=Object(F.useSubscription)(qe).data;Object(c.useEffect)((function(){a&&(t.find((function(e){return e._id==a.newMessage.userSend._id||Pe==a.newMessage.userSend._id}))||(Pe==a.newMessage.userSend._id||Pe==a.newMessage.userReceive._id)&&n(Object(Re.b)(a.newMessage.userSend)),a.newMessage.userSend._id!==Pe&&Ge.play().then((function(){console.log("thanh cong")})).catch((function(){console.log("that bai")})))}),[a]);var r=Object(c.useCallback)((function(e){n(Object(Re.c)(e._id))}),[t,a]);return i.a.createElement("div",{className:"".concat(He)},t.map((function(e,n){return i.a.createElement(Ne,{itemChat:e,key:n,closeUserChat:r})})))},De=L.a.chats,Te=i.a.memo((function(e){return i.a.createElement("section",{className:"".concat(De)},i.a.createElement(ze,null))}));n.default=function(e){return Object(s.g)((function(n){return n.history,i.a.createElement(i.a.Fragment,null,i.a.createElement(R,null),i.a.createElement("div",{className:"pt-5"}),i.a.createElement("div",{className:"pt-5",style:{background:"#fafafa"}},i.a.createElement(e,null)))}))}((function(e){return r()(e),i.a.createElement(i.a.Fragment,null,Object(D.a)(z),i.a.createElement(Te,null))}))}}]);