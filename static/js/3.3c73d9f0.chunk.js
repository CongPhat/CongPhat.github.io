/*! For license information please see 3.3c73d9f0.chunk.js.LICENSE.txt */
(this["webpackJsonplearn-reactjs"]=this["webpackJsonplearn-reactjs"]||[]).push([[3],{373:function(e,t,n){var r;r=function(e){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s="./src/react-webcam.tsx")}({"./src/react-webcam.tsx":function(e,t,n){"use strict";n.r(t);var r=n("react"),i=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},a=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};function s(){return!(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)}"undefined"!==typeof window&&(void 0===navigator.mediaDevices&&(navigator.mediaDevices={}),void 0===navigator.mediaDevices.getUserMedia&&(navigator.mediaDevices.getUserMedia=function(e){var t=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;return t?new Promise((function(n,r){t.call(navigator,e,n,r)})):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}));var c=function(e){function t(t){var n=e.call(this,t)||this;return n.canvas=null,n.ctx=null,n.unmounted=!1,n.state={hasUserMedia:!1},n}return i(t,e),t.prototype.componentDidMount=function(){var e=this.state,t=this.props;s()?e.hasUserMedia||this.requestUserMedia():t.onUserMediaError("getUserMedia not supported")},t.prototype.componentDidUpdate=function(e){var t=this.props;if(s()){var n=JSON.stringify(e.audioConstraints)!==JSON.stringify(t.audioConstraints),r=JSON.stringify(e.videoConstraints)!==JSON.stringify(t.videoConstraints),i=e.minScreenshotWidth!==t.minScreenshotWidth,o=e.minScreenshotHeight!==t.minScreenshotHeight;(r||i||o)&&(this.canvas=null,this.ctx=null),(n||r)&&(this.stopAndCleanup(),this.requestUserMedia())}else t.onUserMediaError("getUserMedia not supported")},t.prototype.componentWillUnmount=function(){this.unmounted=!0,this.stopAndCleanup()},t.stopMediaStream=function(e){e&&(e.getVideoTracks&&e.getAudioTracks?(e.getVideoTracks().map((function(e){return e.stop()})),e.getAudioTracks().map((function(e){return e.stop()}))):e.stop())},t.prototype.stopAndCleanup=function(){var e=this.state;e.hasUserMedia&&(t.stopMediaStream(this.stream),e.src&&window.URL.revokeObjectURL(e.src))},t.prototype.getScreenshot=function(e){var t=this.state,n=this.props;if(!t.hasUserMedia)return null;var r=this.getCanvas(e);return r&&r.toDataURL(n.screenshotFormat,n.screenshotQuality)},t.prototype.getCanvas=function(e){var t=this.state,n=this.props;if(!this.video)return null;if(!t.hasUserMedia||!this.video.videoHeight)return null;if(!this.ctx){var r=this.video.videoWidth,i=this.video.videoHeight;if(!this.props.forceScreenshotSourceSize){var o=r/i;i=(r=n.minScreenshotWidth||this.video.clientWidth)/o,n.minScreenshotHeight&&i<n.minScreenshotHeight&&(r=(i=n.minScreenshotHeight)*o)}this.canvas=document.createElement("canvas"),this.canvas.width=(null===e||void 0===e?void 0:e.width)||r,this.canvas.height=(null===e||void 0===e?void 0:e.height)||i,this.ctx=this.canvas.getContext("2d")}var a=this.ctx,s=this.canvas;return a&&s&&(n.mirrored&&(a.translate(s.width,0),a.scale(-1,1)),a.imageSmoothingEnabled=n.imageSmoothing,a.drawImage(this.video,0,0,(null===e||void 0===e?void 0:e.width)||s.width,(null===e||void 0===e?void 0:e.height)||s.height),n.mirrored&&(a.scale(-1,1),a.translate(-s.width,0))),s},t.prototype.requestUserMedia=function(){var e=this,n=this.props,r=function(r,i){var o={video:"undefined"===typeof i||i};n.audio&&(o.audio="undefined"===typeof r||r),navigator.mediaDevices.getUserMedia(o).then((function(n){e.unmounted?t.stopMediaStream(n):e.handleUserMedia(null,n)})).catch((function(t){e.handleUserMedia(t)}))};if("mediaDevices"in navigator)r(n.audioConstraints,n.videoConstraints);else{var i=function(e){return{optional:[{sourceId:e}]}},o=function(e){var t=e.deviceId;return"string"===typeof t?t:Array.isArray(t)&&t.length>0?t[0]:"object"===typeof t&&t.ideal?t.ideal:null};MediaStreamTrack.getSources((function(e){var t=null,a=null;e.forEach((function(e){"audio"===e.kind?t=e.id:"video"===e.kind&&(a=e.id)}));var s=o(n.audioConstraints);s&&(t=s);var c=o(n.videoConstraints);c&&(a=c),r(i(t),i(a))}))}},t.prototype.handleUserMedia=function(e,t){var n=this.props;if(e||!t)return this.setState({hasUserMedia:!1}),void n.onUserMediaError(e);this.stream=t;try{this.video&&(this.video.srcObject=t),this.setState({hasUserMedia:!0})}catch(r){this.setState({hasUserMedia:!0,src:window.URL.createObjectURL(t)})}n.onUserMedia(t)},t.prototype.render=function(){var e=this,t=this.state,n=this.props,i=n.audio,s=(n.forceScreenshotSourceSize,n.onUserMedia,n.onUserMediaError,n.screenshotFormat,n.screenshotQuality,n.minScreenshotWidth,n.minScreenshotHeight,n.audioConstraints,n.videoConstraints,n.imageSmoothing,n.mirrored),c=n.style,u=void 0===c?{}:c,d=a(n,["audio","forceScreenshotSourceSize","onUserMedia","onUserMediaError","screenshotFormat","screenshotQuality","minScreenshotWidth","minScreenshotHeight","audioConstraints","videoConstraints","imageSmoothing","mirrored","style"]),l=s?o(o({},u),{transform:(u.transform||"")+" scaleX(-1)"}):u;return r.createElement("video",o({autoPlay:!0,src:t.src,muted:i,playsInline:!0,ref:function(t){e.video=t},style:l},d))},t.defaultProps={audio:!0,forceScreenshotSourceSize:!1,imageSmoothing:!0,mirrored:!1,onUserMedia:function(){},onUserMediaError:function(){},screenshotFormat:"image/webp",screenshotQuality:.92},t}(r.Component);t.default=c},react:function(t,n){t.exports=e}}).default},e.exports=r(n(0))},375:function(e,t,n){"use strict";n.r(t);var r=n(6),i=n(0),o=n.n(i),a=n(180),s=n(349),c=n(189),u=n(190),d=n(59),l=n(27),f=n(153),h=(n(352),n(181)),p=Object(h.a)((function(e){return{background:{stroke:"#ddf3e6",fill:"none"},progress:{fill:"none",stroke:"#67e799",strokeLinecap:"round",strokeLinejoin:"round"},text:{fontSize:"3em",fontWeight:"bold",fill:"black","-webkit-transform":"translate(96px,96px) rotateY(162deg)","-moz-transform":"translate(96px,96px) rotateY(162deg)","-ms-transform":"translate(96px,96px) rotateY(162deg)","-o-transform":"translate(96px,96px) rotateY(162deg)",transform:"translate(96px,96px) rotateY(162deg)"}}}));function m(e){var t=e.timeCurrent,n=e.timeOut,o=Object(i.useMemo)((function(){return 600/t}),[t]),a=p(),s=Object(i.useState)(0),c=Object(l.a)(s,2),u=c[0],d=c[1],f=Object(i.useState)(t),h=Object(l.a)(f,2),m=h[0],v=h[1],g=Object(i.useState)(!1),b=Object(l.a)(g,2),j=b[0],x=b[1];return Object(i.useEffect)((function(){x(!0);var e=setInterval((function(){d((function(t){return Math.abs(t)>=600-o&&(x(!1),clearInterval(e),n()),t+o})),v((function(e){return e-1}))}),1e3);return function(){clearInterval(e)}}),[t]),Object(r.jsx)(r.Fragment,{children:j&&Object(r.jsxs)("svg",{width:"48",height:"48",viewBox:"0 0 200 200",style:{transform:"rotateY(180deg)",position:"relative"},children:[Object(r.jsx)("circle",{className:a.background,cx:"100",cy:"100",r:"95","stroke-width":"13px"}),Object(r.jsx)("circle",{className:a.progress,cx:"100",cy:"100",r:"95","stroke-width":"13px",transform:"rotate(-90 100 100)",style:{strokeDasharray:600,strokeDashoffset:u}}),Object(r.jsxs)("text",{className:a.text,dy:".3em","text-anchor":"middle",children:[m,"s"]})]})})}m.defaultProps={timeCurrent:30,timeOut:function(){}};var v=Object(h.a)((function(e){return{root:{height:360,background:"white",border:"1px solid ".concat(e.palette.white.ColorCBDBE8),boxShadow:"0px 10px 20px rgba(0, 0, 0, 0.03)",borderRadius:10,display:"flex",justifyContent:"center",alignItems:"center",position:"relative"},borderError:{borderColor:"red"},errorText:{fontSize:12,fontWeight:400,color:"#EB5757",marginTop:11,textAlign:"center"},boxIconFaceVideo:{marginBottom:50},boxIconVideo:{position:"absolute",bottom:21},boxProgressCircle:{position:"absolute",right:23,top:23},boxVideoAuthencation:{}}})),g=n(34),b=n(373),j=n.n(b);function x(e){var t=e.receiveFile,n=o.a.useRef(null),a=o.a.useRef(null),s=o.a.useState({video:[],image:null}),c=Object(l.a)(s,2),u=c[0],f=c[1],h=o.a.useState([]),p=Object(l.a)(h,2),m=(p[0],p[1]),v=o.a.useCallback((function(e){var t=e.data;if(t.size>0){var r=n.current.getScreenshot();f((function(e){return Object(d.a)(Object(d.a)({},e),{},{video:e.video.concat(t),image:r})}))}}),[m]);return Object(i.useEffect)((function(){setTimeout((function(){n.current.stream?(a.current=new MediaRecorder(n.current.stream,{mimeType:"video/webm"}),a.current.addEventListener("dataavailable",v),a.current.start(),setTimeout((function(){a.current.stop()}),5e3)):alert("Kh\xf4ng th\u1ec3 nh\u1eadn di\u1ec7n camera. Vui l\xf2ng th\u1eed l\u1ea1i!")}),2e3)}),[]),Object(i.useEffect)((function(){if(u.video.length){var e=new Blob(u.video,{type:"video/webm"}),n=new File([e],"test.mp4");t({video:n,image:u.image})}}),[u]),Object(r.jsx)("div",{children:Object(r.jsx)(j.a,{audio:!1,ref:n,style:{width:"91vw",height:"250px"}})})}x.defaultProps={receiveFile:function(e){}},y.defaultProps={};var O=function(){return Object(i.useRef)({checkFileAuthencation:function(){},openVideoAuthencation:function(){}})};function y(e){var t=e.refBoxVideo,n=v(),o=Object(i.useState)(!1),s=Object(l.a)(o,2),c=s[0],u=s[1],h=Object(i.useState)({fileImage:null,fileVideo:null,isError:!1}),p=Object(l.a)(h,2),b=p[0],j=p[1],O=Object(i.useState)(null),y=Object(l.a)(O,2),S=y[0],M=y[1],w=function(){u(!0)};Object(i.useEffect)((function(){w()}),[]);var C=Object(i.useCallback)((function(e){console.log(e,"filefile"),M(e.image)}),[]);return Object(i.useEffect)((function(){}),[]),t&&t.current&&(t.current.checkFileAuthencation=function(){b.fileImage||b.fileVideo||j((function(e){return Object(d.a)(Object(d.a)({},e),{},{isError:!0})}))},t.current.openVideoAuthencation=w),Object(r.jsxs)(a.a,{children:[S&&Object(r.jsx)("img",{src:S}),Object(r.jsxs)(a.a,{className:"".concat(n.root," ").concat(b.isError&&n.borderError),children:[c&&Object(r.jsx)(a.a,{className:n.boxProgressCircle,children:Object(r.jsx)(m,{timeCurrent:6})}),c?Object(r.jsx)(a.a,{className:n.boxVideoAuthencation,children:Object(r.jsx)(x,{receiveFile:C})}):Object(r.jsx)(a.a,{className:n.boxIconFaceVideo,children:Object(r.jsx)("img",{src:g.a.iconFaceVideo})}),Object(r.jsx)(a.a,{className:n.boxIconVideo,onClick:function(){return u(!0)},children:Object(r.jsx)("img",{src:g.a.iconVideo})})]}),b.isError&&Object(r.jsx)(f.a,{variant:"subtitle1",className:n.errorText,children:"Vui l\xf2ng quay video khu\xf4n m\u1eb7t."})]})}var S=n(355),M=n(358),w=n(359),C=n(360),U=n(361),k=Object(h.a)((function(e){return{root:{borderRadius:10},title:{padding:"0px 13px",textAlign:"end",marginTop:10,"& .MuiTypography-h6":{lineHeight:0}},content:{textAlign:"center",padding:"0px 24px"},textContent:{fontWeight:"400 !important"},action:{justifyContent:"center",marginBottom:23,marginTop:14,padding:0}}}));function E(e){var t=e.resetVideo,n=e.refDialogConfirm,i=k(),a=o.a.useState(!1),c=Object(l.a)(a,2),u=c[0],d=c[1],f=function(){d(!1)};return n&&n.current&&(n.current.setModalOpen=function(){d(!0)}),Object(r.jsxs)(S.a,{open:u,onClose:f,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",className:i.root,children:[Object(r.jsx)(U.a,{id:"alert-dialog-title",className:i.title,children:Object(r.jsx)("img",{src:g.a.iconClose,onClick:f})}),Object(r.jsx)(w.a,{className:i.content,children:Object(r.jsx)(C.a,{id:"alert-dialog-description",className:i.textContent,children:"Kh\xf4ng th\u1ec3 nh\u1eadn di\u1ec7n khu\xf4n m\u1eb7t trong Video. Vui l\xf2ng quay l\u1ea1i Video"})}),Object(r.jsx)(M.a,{className:i.action,children:Object(r.jsx)(s.a,{onClick:function(){t(),d(!1)},color:"primary",style:{width:"52.5%"},children:"Quay l\u1ea1i video"})})]})}E.defaultProps={resetVideo:function(){},refDialogConfirm:{}};var V=Object(h.a)({root:{fontSize:18,lineHeight:"24.55px",fontWeight:800,color:"#3D3D3D"},titleHeader:{marginBottom:4},boxButton:{display:"flex",justifyContent:"space-between",marginTop:40},buttonConfirmStyle:{width:"43.3%"}});t.default=function(e){var t=V(),n=O(),o=O();return Object(i.useEffect)((function(){setTimeout((function(){o.current.setModalOpen()}),3e3)}),[]),Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)(a.a,{style:{textAlign:"center",marginBottom:24},children:[Object(r.jsx)(c.a,{variant:"h6",className:t.titleHeader,children:"Video khu\xf4n m\u1eb7t"}),Object(r.jsx)(u.a,{variant:"subtitle1",children:"Vui l\xf2ng kh\xf4ng \u0111\u1eb7t camera s\xe1t v\xe0o khu\xf4n m\u1eb7t v\xe0 c\u1eed \u0111\u1ed9ng g\u01b0\u01a1ng m\u1eb7t t\u1ef1 nhi\xean trong v\xe0i gi\xe2y."})]}),Object(r.jsx)(y,{refBoxVideo:n}),Object(r.jsxs)(a.a,{className:t.boxButton,children:[Object(r.jsx)(s.a,{className:"".concat(t.buttonConfirmStyle),variant:"outlined",color:"primary",fullWidth:!0,children:"Quay l\u1ea1i"}),Object(r.jsx)(s.a,{type:"button",className:"".concat(t.buttonConfirmStyle),variant:"contained",color:"primary",fullWidth:!0,onClick:function(){return n.current.checkFileAuthencation()},children:"X\xe1c nh\u1eadn"})]}),Object(r.jsx)(E,{resetVideo:function(){n.current.openVideoAuthencation(),console.log("reset video")},refDialogConfirm:o})]})}}}]);
//# sourceMappingURL=3.3c73d9f0.chunk.js.map